(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[16],{"84bb":function(t,e,a){"use strict";a("b9d4")},b9d4:function(t,e,a){},ce58:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{staticClass:"flex q-ma-md full-widht",attrs:{flat:""}},[a("div",{staticClass:"flex justify-start"},[a("div",{staticClass:"flex q-ma-md"},[a("q-btn",{attrs:{outline:"",label:"Adicionar Novo",color:"primary"},on:{click:function(e){t.addModal=!0}}})],1)]),a("q-item-label",{attrs:{header:""}}),1==t.noData?a("q-list",{staticClass:"rounded-borders",staticStyle:{width:"100%"},attrs:{bordered:"",padding:""}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[a("q-item-section",[a("q-item-label",{attrs:{lines:"1"}},[t._v(t._s("Não existe categoria cadastrada"))])],1)],1)],1):t._e(),a("q-list",{staticClass:"rounded-borders",staticStyle:{width:"100%"},attrs:{bordered:"",padding:""}},[a("q-table",{attrs:{title:"",flat:"",data:t.promo,columns:t.columns,"visible-columns":t.visibleColumns,"row-key":"desc"},scopedSlots:t._u([{key:"body",fn:function(e){return a("q-tr",{attrs:{props:e}},[a("q-td",[a("q-img",{staticClass:"roundImage",staticStyle:{height:"50px",width:"50px"},attrs:{src:t.getImg(e.row.image)}})],1),a("q-td",[a("div",[t._v(t._s(e.row.title))])]),a("q-td",[a("div",[t._v(t._s(t._formatDate(e.row.startDate)))])]),a("q-td",[a("div",[t._v(t._s(t._formatDate(e.row.endDate)))])]),a("q-td",[1==e.row.isActive?a("q-badge",{attrs:{rounded:"",color:"green",label:"Ativo"}}):a("q-badge",{attrs:{rounded:"",color:"red",label:"Inativo"}})],1),a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:"",round:"",size:"sm",color:"primary",icon:"edit"},on:{click:function(a){return t.edit(e.row)}}}),a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:"",round:"",size:"sm",color:"red",icon:"far fa-trash-alt"},on:{click:function(a){return t._delete(e.row)}}})],1)],1)}}])})],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.addCategoryModal,callback:function(e){t.addCategoryModal=e},expression:"addCategoryModal"}},[a("q-card",[a("q-card-section",{staticClass:"flex"},[a("div",{staticClass:"flex justify-between",staticStyle:{width:"100%"}},[a("q-input",{staticStyle:{"min-width":"70%"},attrs:{outlined:"",dense:"",label:"Nome"},model:{value:t.payload.name,callback:function(e){t.$set(t.payload,"name",e)},expression:"payload.name"}}),a("q-input",{staticStyle:{"max-width":"28%"},attrs:{type:"number",outlined:"",dense:"",label:"Quantidade"},model:{value:t.payload.inventory,callback:function(e){t.$set(t.payload,"inventory",e)},expression:"payload.inventory"}})],1),a("div",{staticClass:"q-ma-sm flex justify-start"},[a("q-toggle",{staticClass:"q-mr-md flex",attrs:{label:"Status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),a("div",{staticClass:"flex q-mt-md"},[0==t.payload.isActive?a("q-badge",{staticStyle:{height:"max-content"},attrs:{rounded:"",color:"red",label:"Inativo"}}):a("q-badge",{staticStyle:{height:"max-content"},attrs:{rounded:"",color:"green",label:"Ativo"}})],1)],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Salvar",color:"primary"},on:{click:function(e){return t.save(t.payload,t.status)}}})],1)],1)],1),a("q-dialog",{attrs:{persistent:""},model:{value:t.editModal,callback:function(e){t.editModal=e},expression:"editModal"}},[a("q-card",{staticStyle:{width:"350px"}},[a("q-card-section",{},[a("q-input",{staticStyle:{"min-width":"60%"},attrs:{outlined:"",dense:"",label:"Nome"},model:{value:t.payload.description,callback:function(e){t.$set(t.payload,"description",e)},expression:"payload.description"}}),a("q-input",{attrs:{outlined:"",dense:"",label:"Quantidade"},model:{value:t.payload.inventory,callback:function(e){t.$set(t.payload,"inventory",e)},expression:"payload.inventory"}}),a("div",{staticClass:"q-ma-sm flex justify-start"},[a("q-toggle",{staticClass:"q-mr-md flex",attrs:{label:"Status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}}),a("div",{staticClass:"flex q-mt-md"},[0==t.payload.isActive?a("q-badge",{staticStyle:{height:"max-content"},attrs:{rounded:"",color:"red",label:"Inativo"}}):a("q-badge",{staticStyle:{height:"max-content"},attrs:{rounded:"",color:"green",label:"Ativo"}})],1)],1)],1),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancelar",color:"primary"}}),a("q-btn",{attrs:{flat:"",label:"Atualizar",color:"primary"},on:{click:function(e){return t.update(t.payload,t.status)}}})],1)],1)],1),a("q-dialog",{attrs:{"full-width":""},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[a("AddPromo",{attrs:{isEdit:t.isEdit,selectedPromo:t.payload}})],1)],1)},i=[],s=(a("159b"),a("a4d3"),a("e01a"),a("b0c0"),a("69b1")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-card",{attrs:{square:""}},[a("q-card-section",[a("q-form",{on:{submit:t.savePromo}},[a("p",{staticClass:"q-mt-md q-pa-sm",staticStyle:{color:"#909090",margin:"0px"}},[t._v("\n        "+t._s("Dados da Promoção")+"\n        "),a("q-icon",{attrs:{name:"help_outline",color:"black"}},[a("q-tooltip",{attrs:{"content-style":"font-size: 14px"}},[a("div",[t._v(t._s())])])],1)],1),a("q-separator",{staticClass:"q-mb-md"}),a("div",{staticClass:"flex justify-between"},[a("div",{staticStyle:{width:"65%"}},[a("div",{staticClass:"flex"},[a("q-input",{staticClass:"q-pa-sm q-mb-md",staticStyle:{width:"50%"},attrs:{color:"primary",dense:"",outlined:"",label:"Título*",error:t.error.promo,"error-message":"Campo obrigatório",rules:[function(t){return t.length<=100&&t.length>=1||"Esse campo é obrigatório"}],maxlength:"100",autofocus:""},on:{keypress:function(){return t.promotion.title.length>0?t.error.promo=!1:t.error.promo=!0}},model:{value:t.promotion.title,callback:function(e){t.$set(t.promotion,"title",e)},expression:"promotion.title"}}),a("q-input",{staticClass:"col q-pa-sm q-pr-sm",staticStyle:{width:"50%"},attrs:{color:"primary",outlined:"",dense:"",label:"Data Inicial",mask:"##/##/####"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxyStart",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{"navigation-max-year-month":t.yearMonth,mask:"DD/MM/YYYY",color:"teal-8"},on:{input:function(e){t.$refs.qDateProxyStart.hide()}},model:{value:t.promotion.startDate,callback:function(e){t.$set(t.promotion,"startDate",e)},expression:"promotion.startDate"}})],1)],1)]},proxy:!0}]),model:{value:t.promotion.startDate,callback:function(e){t.$set(t.promotion,"startDate",e)},expression:"promotion.startDate"}}),a("q-input",{staticClass:"col q-pa-sm q-pr-sm",attrs:{color:"primary",outlined:"",dense:"",label:"Data Final",mask:"##/##/####"},scopedSlots:t._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"event"}},[a("q-popup-proxy",{ref:"qDateProxyStart",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{mask:"DD/MM/YYYY",color:"teal-8"},on:{input:function(e){t.$refs.qDateProxyStart.hide()}},model:{value:t.promotion.endDate,callback:function(e){t.$set(t.promotion,"endDate",e)},expression:"promotion.endDate"}})],1)],1)]},proxy:!0}]),model:{value:t.promotion.endDate,callback:function(e){t.$set(t.promotion,"endDate",e)},expression:"promotion.endDate"}})],1),a("div",{},[a("div",{staticStyle:{display:"flex"}},[a("q-input",{staticClass:"q-pa-sm q-mb-md",staticStyle:{width:"100%"},attrs:{color:"primary",type:"textarea",dense:"",outlined:"",label:"Descrição"},model:{value:t.promotion.description,callback:function(e){t.$set(t.promotion,"description",e)},expression:"promotion.description"}})],1)])]),a("div",{staticClass:"q-ml-md q-mr-md",staticStyle:{width:"30%"}},[a("div",[a("p",{staticClass:"q-mt-md q-pa-sm",staticStyle:{color:"#909090",margin:"0px"}},[t._v("\n              "+t._s("Banner da Promoção")+"\n              "),a("q-icon",{attrs:{name:"help_outline",color:"black"}},[a("q-tooltip",{attrs:{"content-style":"font-size: 14px"}},[a("div",[t._v(t._s("Realize o upload da imagem"))])])],1)],1)]),a("div",[a("q-btn",{staticClass:"q-ml-md full-width bg-teal-1",attrs:{flat:"",dense:"",color:"teal",icon:"image",label:"Selecionar Imagem"},on:{click:function(e){t.modalFiles=!0}}})],1),a("div",{staticClass:"flex q-mt-sm"},[a("q-img",{staticClass:"q-ma-sm",staticStyle:{height:"140px","max-width":"150px"},attrs:{src:t.promotion.urlImg}}),a("p",{staticClass:"q-mt-sm q-pa-sm",staticStyle:{color:"#909090",margin:"0px",width:"50%"}},[t._v("\n              "+t._s("Arquivos permitidos Imagens (JPG e PNG).")+"\n              "+t._s("Tamanho máximo 10 MB.")+"\n              "+t._s("Dimensão 1024x1024.")+"\n            ")])],1)])]),a("q-separator",{staticClass:"q-mb-md"}),a("div",{staticClass:"flex justify-between q-mt-md"},[a("p",{staticClass:"q-mt-md q-pa-sm",staticStyle:{color:"#909090",margin:"0px"}},[t._v("\n          "+t._s("Adicione o Premio")+"\n          "),a("q-icon",{attrs:{name:"help_outline",color:"black"}},[a("q-tooltip",{attrs:{"content-style":"font-size: 14px"}},[a("div",[t._v(t._s("Adicione um prêmio para essa promoção"))])])],1)],1),a("q-btn",{staticClass:"q-ma-sm bg-blue-grey-2",attrs:{flat:"","text-color":"blue-grey-10","no-caps":"",icon:"add",label:"Adicione o Premio"},on:{click:function(e){return t.showAddPremio()}}})],1),a("q-scroll-area",{staticStyle:{height:"20vh","max-width":"100%"},attrs:{"thumb-style":t.thumbStyle,"bar-style":t.barStyle,visible:!0}},[a("div",{staticClass:"q-ma-sm"},[t.lstPrize.length>0?a("TablePrize",{attrs:{tablePrize:t.lstPrize}}):a("p",{staticClass:"q-mt-md q-pa-sm",staticStyle:{color:"#909090",margin:"0px"}},[t._v("\n            "+t._s("Nenhum Prêmio associado")+"\n          ")])],1)]),a("q-separator",{staticClass:"q-mb-md"}),a("div",{staticClass:"q-pa-sm flex justify-between"},[a("q-btn",{staticClass:"q-mt-md",attrs:{outline:"",color:"grey-8","no-caps":"",label:"Cancelar"},on:{click:t.close_modal}}),a("q-btn",{staticClass:"q-mt-md",attrs:{color:"teal-8","no-caps":"",label:"Salvar",type:"submit"}})],1)],1),a("q-dialog",{model:{value:t.premioModal,callback:function(e){t.premioModal=e},expression:"premioModal"}},[a("Award",{staticStyle:{"min-width":"60vw"},attrs:{addPromo:!0}})],1),a("q-dialog",{model:{value:t.modalFiles,callback:function(e){t.modalFiles=e},expression:"modalFiles"}},[a("LibraryFiles",{staticStyle:{"min-width":"50vw"}})],1)],1)],1)},r=[],l=a("ded3"),d=a.n(l),c=(a("498a"),a("a434"),a("d81d"),a("4de4"),a("f508")),m=a("15be"),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-table",{attrs:{title:"",data:t.tablePrize,columns:t.columns,"visible-columns":t.visibleColumns,dense:"",flat:"","row-key":"desc","hide-bottom":""},scopedSlots:t._u([{key:"body",fn:function(e){return a("q-tr",{attrs:{props:e}},[a("q-td",[a("div",[t._v(t._s(e.row.description))])]),a("q-td",[a("div",[t._v(t._s(e.row.quantity))])]),a("q-td",{attrs:{"auto-width":""}},[a("q-btn",{staticClass:"q-mr-sm",attrs:{flat:"",dense:"",round:"",size:"sm",color:"red",icon:"far fa-trash-alt"},on:{click:function(a){return t._deleted(e)}}})],1)],1)}}])})},p=[],h=a("2f62"),b={name:"TablePize",props:["tablePrize"],data:function(){return{visibleColumns:["desc","quantidade"],columns:[{name:"desc",required:!0,label:"Descrição",align:"left",field:"desc",sortable:!0},{name:"quantidade",required:!1,label:"Quantidade",align:"left",field:"estoque",sortable:!0},{name:"status",required:!1,label:"Status",align:"left",field:"status",sortable:!0},{name:"actions",required:!1,label:"",align:"right",field:"actions",sortable:!1}],pagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:5}}},computed:d()({},Object(h["c"])({currentLanguage:"currentLanguage"})),methods:{_deleted:function(t){this.tablePrize.splice(t.rowIndex,1)},showEditAddress:function(t){},deleteAddress:function(t){},loadTranslation:function(){this.columns=[{name:"name",required:!0,label:this.$t("pages.client.address"),field:"name",align:"left",sortable:!0},{name:"number",required:!0,label:this.$t("pages.client.number"),field:"number",align:"left",sortable:!0},{name:"complement",required:!0,label:this.$t("pages.client.complement"),field:"complement",align:"left",sortable:!0},{name:"zip",required:!0,label:this.$t("pages.client.zipCode"),field:"zip",align:"left",sortable:!0},{name:"neighborhood",required:!0,label:this.$t("pages.client.neighborhood"),field:"neighborhood",align:"left",sortable:!0},{name:"city",required:!0,label:this.$t("pages.client.city"),field:"city",align:"left",sortable:!0},{name:"state",required:!0,label:this.$t("pages.client.state"),field:"state",align:"left",sortable:!0},{name:"mainAddress",required:!0,label:this.$t("pages.client.mainAddress"),field:"mainAddress",align:"left",sortable:!0}]}},mounted:function(){var t=this;this.currentLanguage;this.$root.$on("updatelst",(function(){console.log(t.tablePrize),t.tablePrize=t.tablePrize}))},watch:{currentLanguage:function(){}}},g=b,f=a("2877"),y=a("eaac"),q=a("bd08"),v=a("db86"),C=a("9c40"),w=a("eebe"),x=a.n(w),A=Object(f["a"])(g,u,p,!1,null,null,null),D=A.exports;x()(A,"components",{QTable:y["a"],QTr:q["a"],QTd:v["a"],QBtn:C["a"]});var _=a("1282"),P=a("ef2e"),S=a("bd21"),k=a.n(S);var I={name:"AddPromo",props:["isEdit","selectedPromo"],data:function(){return{thumbStyle:{right:"0px",borderRadius:"5px",backgroundColor:"#777",width:"5px",opacity:.75},barStyle:{right:"0px",borderRadius:"9px",backgroundColor:"#777",width:"5px",opacity:.2},imgWasEdited:!1,modalFiles:!1,yearMonth:Object(P["c"])(),startDate:"27/09/2021",endDate:"27/09/2021",promotion:{title:"",description:"",startDate:Object(P["b"])(),endDate:Object(P["b"])(),img:{},urlImg:k.a,promotionAward:[{awardId:0,quantity:1}]},error:{promo:!1},typePerson:[{label:"Física",value:0},{label:"Jurídica",value:1}],maskDocument:["###.###.###-##","##.###.###/####-##"],contactModal:!1,premioModal:!1,isEditAddress:!1,isEditContact:!1,lstPrize:[]}},methods:{gotoHome:function(){this.close_modal(),this.$router.push({name:"/Dashboard"})},close_modal:function(){this.$root.$emit("close_modal_promocao")},showAddPremio:function(){this.premioModal=!0},showEditAddress:function(t){this.agencyAddress=d()(d()({},t.row),{},{index:t.rowIndex,error:{name:!1,neighborhood:!1,zip:!1,city:!1,state:!1}}),this.addressModal=!0,this.isEditAddress=!0},updateAddress:function(){this.isEditAddress?this.editAddress():this.addAddress()},addressIsValid:function(){var t=!0;return this.agencyAddress.error={name:!1,neighborhood:!1,zip:!1,city:!1,state:!1},this.agencyAddress.name.trim().length||(this.agencyAddress.error.name=!0,t=!1),this.agencyAddress.neighborhood.trim().length||(this.agencyAddress.error.neighborhood=!0,t=!1),this.agencyAddress.zip.trim().length||(this.agencyAddress.error.zip=!0,t=!1),this.agencyAddress.city.trim().length||(this.agencyAddress.error.city=!0,t=!1),this.agencyAddress.state.trim().length||(this.agencyAddress.error.state=!0,t=!1),t},addAddress:function(){this.addressIsValid()&&(this.tableAddresses.push(this.agencyAddress),this.addressModal=!1,this.cleanAddress())},editAddress:function(){this.addressIsValid()&&(this.tableAddresses.splice(this.agencyAddress.index,1,this.agencyAddress),this.addressModal=!1,this.isEditAddress=!1,this.cleanAddress())},deleteAddress:function(t){for(var e=0;e<this.tableAddresses.length;e++)if(this.tableAddresses[e].name===t.name){this.tableAddresses.splice(e,1);break}},cleanAddress:function(){this.agencyAddress={name:"",number:"",complement:"",neighborhood:"",zip:"",city:"",state:"",country:"Brasil",mainAddress:!1,addressType:"",error:{name:!1,neighborhood:!1,zip:!1,city:!1,state:!1}}},optionsFn:function(t){var e=new Date,a=e.getFullYear(),o=e.getMonth()+1,i=e.getDate();i<10&&(i="0"+i),o<10&&(o="0"+o);var s=a+"/"+o+"/"+i;return t>=s},showAddContact:function(){this.cleanContact(),this.contactModal=!0},showEditContact:function(t){this.agencyContacts=d()(d()({},t.row),{},{index:t.rowIndex,error:{name:!1,phoneMain:!1}}),this.contactModal=!0,this.isEditContact=!0},updateContact:function(){this.isEditContact?this.editContact():this.addContact()},contactIsValid:function(){var t=!0;return this.agencyContacts.error={name:!1,phoneMain:!1},this.agencyContacts.name.trim().length||(this.agencyContacts.error.name=!0,t=!1),this.agencyContacts.phoneMain.trim().length||(this.agencyContacts.error.phoneMain=!0,t=!1),t},addContact:function(){this.contactIsValid()&&(this.tableContacts.push(this.agencyContacts),this.contactModal=!1,this.cleanContact())},editContact:function(t){this.contactIsValid()&&(this.tableContacts.splice(this.agencyContacts.index,1,this.agencyContacts),this.contactModal=!1,this.isEditContact=!1,this.cleanContact())},deleteContact:function(t){for(var e=0;e<this.tableContacts.length;e++)if(this.tableContacts[e].name===t.name){this.tableContacts.splice(e,1);break}},cleanContact:function(){this.agencyContacts={name:"",phoneMain:"",phone:"",email:"",departament:"",mainContact:!1,error:{name:!1,phoneMain:!1}}},isValid:function(){var t=!0;return this.error={agency:!1},this.promo.title.trim().length||(this.error.promo=!0,t=!1),t},savePromo:function(){this.isEdit?this.editPromo():this.addPromo()},addPromo:function(){var t=this;this.imgWasEdited?this.promotion.img=this.promotion.img.id+this.promotion.img.fileFormat:this.promotion.img=this.promotion.imageId;var e={title:this.promotion.title,description:this.promotion.description,startDate:Object(P["d"])(this.promotion.startDate),endDate:Object(P["d"])(this.promotion.endDate),isActive:!0,image:this.promotion.img,promotionAward:this.lstPrize.map((function(t){return{awardId:t.id,quantity:t.quantity}}))};console.log(Object(P["d"])(this.promotion.startDate)),c["a"].show(),Object(s["d"])(e).then((function(e){c["a"].hide(),t.isEdit=!1,t.$root.$emit("close_modal_promocao")})).catch((function(t){c["a"].hide(),console.log(t)}))},editPromo:function(){var t=this;console.log("Data convertida",Object(P["d"])(this.promotion.endDate)),console.log("Data sem reverter",this.promotion.endDate),this.imgWasEdited?this.promotion.img=this.promotion.img.id+this.promotion.img.fileFormat:this.promotion.img=this.promotion.imageId;var e={title:this.promotion.title,description:this.promotion.description,startDate:Object(P["d"])(this.promotion.startDate),endDate:Object(P["d"])(this.promotion.endDate),isActive:!0,image:this.promotion.img,promotionAward:this.lstPrize.map((function(e){return console.log(e),void 0==e.promotionId&&(e.promotionId=t.promotion.id),void 0==e.awardId&&(e.awardId=e.id),{awardId:e.awardId,quantity:e.quantity,promotionId:e.promotionId}}))};c["a"].show(),Object(s["w"])(this.promotion.id,e).then((function(e){c["a"].hide(),t.isEdit=!1,t.$root.$emit("close_modal_promocao")})).catch((function(t){c["a"].hide(),console.log(t)}))},isNumber:function(t){t=t||window.event;var e=t.which?t.which:t.keyCode;if(!(e>31&&(e<48||e>57)&&46!==e))return!0;t.preventDefault()},selectItemById:function(t,e){var a=t.filter((function(t){return t.value===e}));if(a.length>0)return a[0]}},created:function(){var t=this;this.$root.$on("selectedFiles",(function(e){t.promotion.img=e,t.promotion.urlImg=e.file,t.modalFiles=!1,t.imgWasEdited=!0,console.log("Selected files",t.promotion.img)})),this.$root.$on("add_premio",(function(e){t.lstPrize.push(e),console.log(t.lstPrize)})),this.$root.$on("close_modal_premio",(function(){t.premioModal=!1})),console.log(this.isEdit),this.isEdit&&(this.promotion=this.selectedPromo,this.promotion.title=this.selectedPromo.title,this.promotion.urlImg=this.selectedPromo.image,this.promotion.startDate=Object(P["a"])(this.selectedPromo.startDate),this.promotion.endDate=Object(P["a"])(this.selectedPromo.endDate),this.lstPrize=null!==this.selectedPromo.promotionAward?this.selectedPromo.promotionAward:[],console.log("PROMOTION >> ",this.promotion))},components:{Award:m["default"],TablePrize:D,LibraryFiles:_["a"]}},M=I,$=a("f09f"),Q=a("a370"),z=a("ead5"),E=a("0016"),j=a("079eb"),O=a("0378"),T=a("05c0"),F=a("eb85"),N=a("27f9"),B=a("7cbe"),Y=a("52ee"),L=a("068f"),V=a("4983"),R=a("24e8"),J=Object(f["a"])(M,n,r,!1,null,null,null),U=J.exports;x()(J,"components",{QCard:$["a"],QCardSection:Q["a"],QBreadcrumbs:z["a"],QIcon:E["a"],QBreadcrumbsEl:j["a"],QBtn:C["a"],QForm:O["a"],QTooltip:T["a"],QSeparator:F["a"],QInput:N["a"],QPopupProxy:B["a"],QDate:Y["a"],QImg:L["a"],QScrollArea:V["a"],QDialog:R["a"]});a("436b");var W={name:"Promotions",components:{AddPromo:U},data:function(){return{visibleColumns:["imgUrl","title","desc","start","end","status"],columns:[{name:"imgUrl",required:!0,label:"",align:"left",field:"imgUrl",sortable:!0},{name:"title",required:!0,label:"Título",align:"left",field:"title",sortable:!0},{name:"desc",required:!0,label:"Descrição",align:"left",field:"desc",sortable:!0},{name:"start",required:!1,label:"Início",align:"left",field:"start",sortable:!0},{name:"end",required:!1,label:"Data do Sorteio",align:"left",field:"end",sortable:!0},{name:"status",required:!1,label:"Status",align:"left",field:"status",sortable:!0}],editModal:!1,isEdit:!1,addCategoryModal:!1,addModal:!1,promo:[],name:"",status:!0,payload:{},noData:!1}},methods:{getImg:function(t){return null==t?k.a:t},edit:function(t){this.isEdit=!0,this.addModal=!0,console.log("payload on edit",t),this.payload=t,console.log(this.payload.id)},update:function(t,e){var a=this;this.payload=t,this.payload.isActive=e,Object(s["w"])(this.payload).then((function(t){console.log(t),a.editModal=!1}))},getPromotions:function(){var t=this;Object(s["o"])().then((function(e){"No data found"===e?(t.noData=!0,console.log(t.noData)):(t.noData=!1,e.forEach((function(e){e.promotionAward.forEach((function(t){e.promotionAward[e.promotionAward.indexOf(t)].description=t.award.description})),e.imageId=e.image,Object(s["m"])(e.image).then((function(t){e.image=t})),t.promo.push(e)}))),console.log(t.promo)}))},_delete:function(t){var e=this;this.$q.dialog({title:"Delete",message:"Tem certeza que deseja remover essa promoção?"}).onOk((function(){Object(s["h"])(t.id).then((function(t){e.editModal=!1,e.$q.dialog({title:"Deletar Promoção",message:"Promoção removida com sucesso!"}).onOk((function(){e.editModal=!1,e.promo=[],e.getPromotions()}))})).catch((function(t){500==t.response.status&&e.$q.dialog({title:"Categoria em Uso",message:"Não é possível remover uma promoção ativa"}).onOk((function(){})),console.log(t.response.status)})),console.log("OK")})).onCancel((function(){})).onDismiss((function(){}))},save:function(t,e){console.log(name),console.log(e),this.payload={description:t.name,inventory:t.inventory,isActive:e,promotionId:null},Object(s["d"])(this.payload).then((function(t){console.log(t)}))},_formatDate:function(t){return Object(P["a"])(t)}},mounted:function(){var t=this;this.getPromotions(),this.$root.$on("close_modal_promocao",(function(){t.addModal=!1,t.promo=[],t.getPromotions()}))}},G=W,H=(a("84bb"),a("0170")),K=a("1c1c"),X=a("66e5"),Z=a("4074"),tt=a("58a81"),et=a("9564"),at=a("4b7e"),ot=a("714f"),it=a("7f67"),st=Object(f["a"])(G,o,i,!1,null,"b3fbd01a",null);e["default"]=st.exports;x()(st,"components",{QCard:$["a"],QBtn:C["a"],QItemLabel:H["a"],QList:K["a"],QItem:X["a"],QItemSection:Z["a"],QTable:y["a"],QTr:q["a"],QTd:v["a"],QImg:L["a"],QBadge:tt["a"],QDialog:R["a"],QCardSection:Q["a"],QInput:N["a"],QToggle:et["a"],QCardActions:at["a"]}),x()(st,"directives",{Ripple:ot["a"],ClosePopup:it["a"]})}}]);