(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[22],{"3a2e":function(e,t,a){"use strict";a("77fe")},"77fe":function(e,t,a){},fabf:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",[a("q-breadcrumbs",{staticClass:"text-orange q-mt-md q-ml-md",attrs:{"active-color":"secondary"}},[a("span",{staticClass:"q-ml-md text-h6 text-grey-8"},[e._v(" Adicionar Novo Post ")])]),a("q-card",{staticClass:"q-ma-lg full-widht",attrs:{flat:""}},[a("div",{staticClass:"flex q-pa-xl"},[a("div",{staticClass:"col q-mt-md"},[a("div",{staticClass:"q-ma-sm"},[a("q-input",{attrs:{label:"Título",outlined:"",dense:""},model:{value:e.post.title,callback:function(t){e.$set(e.post,"title",t)},expression:"post.title"}})],1),a("div"),a("q-list",{staticClass:"rounded-borders q-mt-md",staticStyle:{widht:"100%",height:"82%"},attrs:{bordered:"",padding:""}},[a("span",{staticClass:"q-ml-md q-my-md text-h6 text-grey-8"},[e._v(" Descrição ")]),a("div",{staticClass:"q-ma-sm"},[a("q-editor",{attrs:{dense:e.$q.screen.lt.md,toolbar:[[{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,list:"only-icons",options:["left","center","right","justify"]},{label:e.$q.lang.editor.align,icon:e.$q.iconSet.editor.align,fixedLabel:!0,options:["left","center","right","justify"]}],["bold","italic","strike","underline","subscript","superscript"],["token","hr","link","custom_btn"],["print","fullscreen"],[{label:e.$q.lang.editor.formatting,icon:e.$q.iconSet.editor.formatting,list:"no-icons",options:["p","h1","h2","h3","h4","h5","h6","code"]},{label:e.$q.lang.editor.fontSize,icon:e.$q.iconSet.editor.fontSize,fixedLabel:!0,fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},{label:e.$q.lang.editor.defaultFont,icon:e.$q.iconSet.editor.font,fixedIcon:!0,list:"no-icons",options:["default_font","arial","arial_black","comic_sans","courier_new","impact","lucida_grande","times_new_roman","verdana"]},"removeFormat"],["quote","unordered","ordered","outdent","indent"],["undo","redo"],["viewsource"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"}},model:{value:e.post.description,callback:function(t){e.$set(e.post,"description",t)},expression:"post.description"}})],1),a("div")])],1),a("div",{staticClass:"col"},[a("div",{staticClass:"col justify-around q-pa-md"},[a("div",{staticClass:"q-ml-md q-mr-md flex justify-center"},[a("div",{staticClass:"flex"},[a("div",[a("p",{staticClass:"q-mt-md q-pa-sm",staticStyle:{color:"#909090",margin:"0px"}},[e._v("\r\n                "+e._s("Escolher imagem da capa ")+"\r\n                "),a("q-icon",{attrs:{name:"help_outline",color:"black"}},[a("q-tooltip",{attrs:{"content-style":"font-size: 14px"}},[a("div",[e._v(e._s("Escolher imagem da capa "))])])],1)],1),a("q-btn",{staticClass:"q-ml-md full-width bg-teal-1",attrs:{flat:"",dense:"",color:"teal",icon:"image",label:"Selecionar Imagem"},on:{click:function(t){e.modalFiles=!0}}})],1)]),a("div",{staticClass:"flex q-ml-sm justify-end"},[a("q-img",{staticClass:"q-ma-sm",staticStyle:{height:"140px","max-width":"150px"},attrs:{src:e.post.imageUrl}}),a("p",{staticClass:"q-mt-sm q-pa-sm",staticStyle:{color:"#909090",margin:"0px",width:"50%"}},[e._v("\r\n                "+e._s("Arquivos permitidos Imagens (JPG e PNG).")+"\r\n                "+e._s("Tamanho máximo 10 MB.")+"\r\n                "+e._s("Dimensão 1024x1024.")+"\r\n              ")])],1)]),a("q-list",{staticClass:"rounded-borders q-pa-md",staticStyle:{"min-width":"500px"},attrs:{bordered:""}},[a("q-expansion-item",{attrs:{"expand-separator":"",label:"Status e Visibilidade"}},[a("div",{staticClass:"flex justify-between"},[a("div",[a("span",{staticClass:"q-ml-md q-my-md text-subtitle text-grey-8 flex"},[e._v(" Visibilidade ")])]),a("div",{staticClass:"q-mt-md"},[a("q-badge",{attrs:{outline:"",dense:"",color:"orange",label:"Públic"}})],1)]),a("div",{staticClass:"flex justify-between"},[a("div",[a("span",{staticClass:"q-ml-md q-my-md text-subtitle text-grey-8 flex"},[e._v(" Visibilidade ")])]),a("div",{staticClass:"q-mt-md"},[a("q-badge",{attrs:{outline:"",dense:"",color:"green",label:"Imediatamente"}})],1)])]),a("q-expansion-item",{attrs:{"expand-separator":"",label:"Categorias"}},[a("q-option-group",{attrs:{options:e.category,type:"checkbox"},model:{value:e.selectedCategory,callback:function(t){e.selectedCategory=t},expression:"selectedCategory"}})],1),a("q-expansion-item",{attrs:{"expand-separator":"",label:"Resumo"}},[a("q-list",{attrs:{bordered:""}},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"}},[a("q-item-section",[a("span",{staticClass:"q-ml-md q-my-md text-subtitle text-grey-8"},[e._v(" Escreva um resumo (Opcional) ")]),a("q-input",{attrs:{outlined:"",type:"textarea"},model:{value:e.post.summary,callback:function(t){e.$set(e.post,"summary",t)},expression:"post.summary"}})],1)],1)],1)],1)],1)],1)])]),a("q-list",{staticClass:"flex justify-end q-mb-md q-mr-md"},[a("q-btn",{staticClass:"q-ma-md bg-cyan-8 text-white",attrs:{label:"Publicar"},on:{click:function(t){return e.prePost(e.post)}}})],1)],1),a("q-dialog",{model:{value:e.modalFiles,callback:function(t){e.modalFiles=t},expression:"modalFiles"}},[a("LibraryFiles",{staticStyle:{"min-width":"50vw"}})],1)],1)},i=[],s=a("ded3"),l=a.n(s),n=(a("b0c0"),a("d3b7"),a("25f0"),a("9129"),a("a9e3"),a("d81d"),a("4de4"),a("caad"),a("2532"),a("ac1f"),a("5319"),a("f508")),r=a("1282"),c=a("bd21"),d=a.n(c),m=a("69b1"),p=a("9dce"),u=a.n(p),g=a("302f"),f=a.n(g),h=a("ec26"),_=(a("1cb6"),new f.a);function b(e){return l()({label:e.name,value:e.id},e)}var y={name:"Posts",components:{LibraryFiles:r["a"]},data:function(){return{modalFiles:!1,post:{title:"",description:"Adicione aqui texto",summary:"",CategoryId:"",image:d.a,imageUrl:d.a,auhor:"admin",isActive:!0},isEdit:!1,total_capacity:0,current_type:7,dragging:!1,type:7,files:[],pictures:[],upInstancePicture:{},category:[],selectedCategory:[],listFiles:[],screenHeight:window.innerHeight-400,Image:{}}},methods:{prePost:function(e){1==this.isEdit?this.updatePost(e):this.addPost(e)},addPost:function(e){var t=this;e.category=this.selectedCategory.toString(),e.CategoryId=parseInt(this.selectedCategory),console.log(e),console.log(this.selectedCategory),console.log(this.Image),this.post.image=this.Image,n["a"].show(),Object(m["c"])(e).then((function(e){console.log(e),"ok"==e&&(n["a"].hide(),t.$q.dialog({title:"Novo Post",message:"Post publicado com sucesso"}).onOk((function(){t.$router.push({path:"/News",params:"add"})})))})).catch((function(e){n["a"].hide(),console.log(e)}))},updatePost:function(e){var t=this;e.categoryId=parseInt(this.selectedCategory),this.post.image=this.Image,console.log(this.Image),Number.isNaN(e.image)&&this.$q.dialog({title:"Post",message:"O campo Imagem é obrigatório"}).onOk((function(){})),Number.isNaN(e.categoryId)&&this.$q.dialog({title:"Post",message:"É necessário informar a categoria!"}).onOk((function(){})),n["a"].show(),Object(m["v"])(e.id,e).then((function(e){console.log(e),n["a"].hide(),"updated"==e&&t.$q.dialog({title:"Post",message:"Post atualizado"}).onOk((function(){t.$router.push({path:"/News"})}))})).catch((function(e){n["a"].show(),console.log(e)}))},getCategory:function(){var e=this;Object(m["l"])().then((function(t){if("No data found"===t)e.noData=!0,console.log(e.noData);else{e.noData=!1;var a=t.map(b);e.category=a}}))},checkFileType:function(e){return e.filter((function(e){return"image/png"===e.type}))},checkFileSize:function(e){return e.filter((function(e){return e.size<2048}))},handlePluploadFileFiltered:function(e,t,a){var o=this;n["a"].show(),t.upload_type=o.current_type,this.$root.$emit("addFiles",t)},handlePluploadBeforeUpload:function(e,t){var a=this,o=this;return void 0!==o.total_capacity&&null!=o.total_capacity?o.total_capacity<100?o.saveFile(e,t,t.upload_type):(console.log("maior que 100%"),this.$q.dialog({title:o.lang.appcomponents.files.full_storage,message:o.lang.appcomponents.files.full_message,ok:"Ok"}).then((function(){a.$root.$emit("openDrawer","show_uploads"),a.$root.$emit("showPane","show_uploads")}))):(o.total_capacity=sessionStorage.getItem("total_storage"),o.total_capacity<100?o.saveFile(e,t,t.upload_type):this.$q.dialog({title:o.lang.appcomponents.files.full_storage,message:o.lang.appcomponents.files.full_message,ok:"Ok"}).then((function(){a.$root.$emit("openDrawer","show_uploads"),a.$root.$emit("showPane","show_uploads")}))),!1},handlePluploadUploadFile:function(e,t){var a=this;a.getIntanceContent(),void 0!==a.total_capacity&&null!==a.total_capacity&&a.total_capacity>=100&&(console.log("maior que 100%"),e.stop(),this.$q.dialog({title:a.lang.appcomponents.files.full_storage,message:a.lang.appcomponents.files.full_message,ok:"Ok"}).then((function(){a.$root.$emit("clean_Files_toUpload"),a.$root.$emit("exitPropertie")})))},handlePluploadUploadProgress:function(e,t){this.$root.$emit("uploadFileProgress",e,t)},handlePluploadFileUploaded:function(e,t,a){var o=this;o.$root.$emit("fileUploaded_success",t),o.setFileAsUploded(t),o.getLibrariesInfo()},handlePluploadUploadComplete:function(e,t){var a=this;a.total_time=_.getTotalTimeValues().seconds,a.total_time=0,_.stop(),this.$root.$emit("openDrawer","show_uploads"),this.$root.$emit("showPane","show_uploads"),a.getLibrary(a.type)},handlePluploadError:function(e,t){var a=this;n["a"].hide(),t.file.type.includes("audio")&&(console.log("Error #"+t.code+": "+t.message+": for File name: "+t.file.name),a.$root.$emit("errorMessage",t),deleteFile(t.file.fileId).then((function(){})).catch((function(e){console.log(e);var t=e.message||e;a.$ga.exception(t)})))},getFileFormat:function(e){var t=/(?:\.([^.]+))?$/,a=t.exec(e)[1];return void 0!==a?a:""},saveImage:function(e,t,a){var o=this,i=this,s=Object(h["a"])(32);s=String(s),s=s.replace("-","").replace("-","").replace("-","").replace("-",""),t.fileId=s,e.settings.multipart_params.key="media/image/"+s+"."+i.getFileFormat(t.name),e.settings.multipart_params.Filename=s+"."+i.getFileFormat(t.name);var l={};null!==t.name&&void 0!==t.name&&""!==t.name&&(l.FileFormat="."+i.getFileFormat(t.name),l.Name=t.name.replace(l.FileFormat,""),l.ImageId=t.fileId,l.Size=t.size),n["a"].show(),Object(m["s"])(l).then((function(a){t.status=u.a.UPLOADING,e.trigger("UploadFile",t),console.log(a),i.Image=a,Object(m["r"])().then((function(e){console.log(e)})),a.imageId,a.fileFormat,Object(m["m"])(a.imageId+a.fileFormat).then((function(e){console.log(e),i.post.imageUrl=e,i.post.image=e})),1==o.isEdit&&(i.post.image=a.imageId+a.fileFormat,n["a"].hide()),n["a"].hide()})).catch((function(e){_.stop(),console.log(e),n["a"].hide()}))},onRejected:function(e){this.$q.notify({type:"negative",message:"".concat(e.length," file(s) did not pass validation constraints")})},getImgUrl:function(e){Object(m["m"])(e.Id+e.fileFormat).then((function(e){console.log(e),self.post.imageUrl=e,self.post.image=e}))}},mounted:function(){var e=this,t=this;void 0!==this.$route.params.id&&(this.post=this.$route.params,this.isEdit=!0,this.selectedCategory=[this.post.categoryId],this.Image=this.post.image),this.getCategory(),this.$root.$on("selectedFiles",(function(t){e.post.imageUrl=t.file,e.Image=t.id+t.fileFormat,console.log(t),e.modalFiles=!1})),Object(m["r"])().then((function(a){t.upInstancePicture=new u.a.Uploader({runtimes:"html5,browserplus,silverlight,gears,html4",drop_element:"drop_images",browse_button:"images",container:"uploader_Container",unique_names:!1,rename:!0,url:"https://app-aires-studio.s3.amazonaws.com/",multipart_params:{key:"media/teste/filename",Filename:"filename",acl:"public-read","Content-Type":"application/octet-stream",AWSAccessKeyId:a.AWSAccessKeyId,policy:a.policy,signature:a.signature},filters:{mime_types:[{title:"Image files",extensions:"jpeg,jpg,gif,png,bmp,webp"},{title:"Zip files",extensions:"zip "}]},resize:{quality:50},preinit:{Init:function(e,t){}},init:{PostInit:function(){},FilesAdded:function(e,a){for(var o=0;o<a.length;o++)t.upInstancePicture.start(),0===o&&_.start()},FileFiltered:function(t,a,o){e.$root.$emit("openDrawer","show_uploads"),e.$root.$emit("showPane","show_uploads"),e.$root.$emit("addFiles",a)},BeforeUpload:function(a,o){return void 0!==t.total_capacity&&null!==t.total_capacity?t.total_capacity<100?t.saveImage(a,o,10):(console.log("maior que 100%"),t.$q.dialog({title:t.lang.appcomponents.files.full_storage,message:t.lang.appcomponents.files.full_message,ok:"Ok"}).then((function(){e.$root.$emit("openDrawer","show_uploads"),e.$root.$emit("showPane","show_uploads")}))):(t.total_capacity=sessionStorage.getItem("total_storage"),t.total_capacity<100?t.saveImage(a,o,10):t.$q.dialog({title:t.lang.appcomponents.files.full_storage,message:t.lang.appcomponents.files.full_message,ok:"Ok"}).then((function(){e.$root.$emit("openDrawer","show_uploads"),e.$root.$emit("showPane","show_uploads")}))),!1},UploadFile:function(e,t){},UploadProgress:function(e,a){t.$root.$emit("uploadFileProgress",e,a)},FileUploaded:function(e,a,o){t.$root.$emit("fileUploaded_success",a)},UploadComplete:function(a,o){t.total_time=_.getTotalTimeValues().seconds,t.total_time=0,_.stop(),e.$root.$emit("update_recentUploads"),e.$root.$emit("openDrawer","show_uploads"),e.$root.$emit("showPane","show_uploads")},Error:function(e,a){console.log("Error #"+a.code+": "+a.message+": for File name: "+a.file.name),t.$root.$emit("errorMessage",a);var o=a.message||a;t.$ga.exception(o),deleteImageFile(a.file.fileId).then((function(){})).catch((function(e){console.log(e);var a=e.message||e;t.$ga.exception(a)}))}}}),t.upInstancePicture.init()})).catch((function(e){console.log(e)}))}},q=y,$=(a("3a2e"),a("2877")),v=a("9989"),w=a("ead5"),x=a("f09f"),I=a("9c40"),F=a("1c1c"),C=a("27f9"),P=a("d66b"),k=a("0016"),S=a("05c0"),U=a("068f"),O=a("3b73"),j=a("58a81"),z=a("9f0a"),N=a("66e5"),Q=a("4074"),D=a("24e8"),E=a("714f"),A=a("eebe"),L=a.n(A),T=Object($["a"])(q,o,i,!1,null,"40a88834",null);t["default"]=T.exports;L()(T,"components",{QPage:v["a"],QBreadcrumbs:w["a"],QCard:x["a"],QBtn:I["a"],QList:F["a"],QInput:C["a"],QEditor:P["a"],QIcon:k["a"],QTooltip:S["a"],QImg:U["a"],QExpansionItem:O["a"],QBadge:j["a"],QOptionGroup:z["a"],QItem:N["a"],QItemSection:Q["a"],QDialog:D["a"]}),L()(T,"directives",{Ripple:E["a"]})}}]);